# –õ–∞–±–æ—Ä–∞—Ç–æ—Ä–Ω–∞—è —Ä–∞–±–æ—Ç–∞ –ø–æ —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–º —Å–∏—Å—Ç–µ–º–∞–º (ITMO / –Ø–Ω–¥–µ–∫—Å.–ü—Ä–∞–∫—Ç–∏–∫—É–º)

–†–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π —Å–æ–∑–¥–∞–Ω –¥–ª—è –∏–∑—É—á–µ–Ω–∏—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä—ã —Ä–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã—Ö —Å–∏—Å—Ç–µ–º —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –æ–±–ª–∞—á–Ω–æ–π –ø–ª–∞—Ç—Ñ–æ—Ä–º—ã Yandex Cloud. –í –ø—Ä–æ–µ–∫—Ç–µ —Ä–∞–∑–≤–æ—Ä–∞—á–∏–≤–∞–µ—Ç—Å—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–ª—è —Å–∏—Å—Ç–µ–º—ã —Å –±–∞–ª–∞–Ω—Å–∏—Ä–æ–≤–∫–æ–π –Ω–∞–≥—Ä—É–∑–∫–∏ –º–µ–∂–¥—É –º–∞—Å—Ç–µ—Ä- –∏ —Å–ª–µ–π–≤-—Å–µ—Ä–≤–µ—Ä–∞–º–∏ PostgreSQL.

## üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏
- **–ò–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä–∞**: Terraform + Yandex Cloud
- **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è**: Ansible
- **–°–£–ë–î**: PostgreSQL (–º–∞—Å—Ç–µ—Ä-—Å–ª–µ–π–≤ —Ä–µ–ø–ª–∏–∫–∞—Ü–∏—è)

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### 1. –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω—ã–µ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è
- –ê–∫–∫–∞—É–Ω—Ç –≤ [Yandex Cloud](https://cloud.yandex.ru/)
- –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–π [Terraform](https://developer.hashicorp.com/terraform/tutorials/aws-get-started/install-cli) (1.11.3)
- –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—ã–π [Ansible](https://docs.ansible.com/ansible/latest/installation_guide/index.html) (2.15.13)
- –î–æ—Å—Ç—É–ø –∫ YC CLI (`yc`)

### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö
–ø–µ—Ä–µ–π–¥–∏—Ç–µ –≤ –ø–∞–ø–∫—É infrs
```bash

cd infra
```

–°–∫–æ–ø–∏—Ä—É–π—Ç–µ —à–∞–±–ª–æ–Ω –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –∏ —É–∫–∞–∂–∏—Ç–µ —Å–≤–æ–∏ –∑–Ω–∞—á–µ–Ω–∏—è:
```bash

cp terraform_exp.tfvars terraform.tfvars
nano terraform.tfvars  # –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª
```

–ò–ª–∏ —Å—Ä–∞–∑—É —Å–æ–∑–¥–∞–π—Ç–µ –ø–∞–ø–∫—É secrets, —Å–∫–æ–ø–∏—Ä—É–π—Ç–µ –∏ –æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ —Ñ–∞–π–ª —Ç–∞–º
```bash
mkdir secrets
cp terraform_exp.tfvars secrets/terraform.tfvars
nano secrets/terraform.tfvars
```

### 3. –†–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã
```bash

terraform init
terraform apply -auto-approve # –∏–ª–∏ terraform apply --var-file="secrets/terraform.tfvars" -auto-approve
```
–ü–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è:
- –í `infra/secrets/vm_ips.json` –ø–æ—è–≤—è—Ç—Å—è IP-–∞–¥—Ä–µ—Å–∞ –í–ú
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –≥–µ–Ω–µ—Ä–∏—Ä—É–µ—Ç—Å—è –∏–Ω–≤–µ–Ω—Ç–∞—Ä–Ω—ã–π —Ñ–∞–π–ª –¥–ª—è Ansible

### 4. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ñ–∞–π–ª–∞ inventory.ini
–í–æ—Å–ø–æ–ª—å–∑—É–π—Ç–µ—Å—å —Ñ–∞–π–ª–æ–º `example_inventory.ini`. –í –Ω—ë–º –µ—Å—Ç—å –≤—Å—ë –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–µ –¥–ª—è –∑–∞–ø—É—Å–∫–∞ –ø–∞–π–ø–ª–∞–π–Ω–∞ ansible.
–ó–∞–º–µ–Ω–∏—Ç–µ –∞–¥—Ä–µ—Å–∞ –≤–∏—Ä—Ç—É–∞–ª—å–Ω—ã—Ö –º–∞—à–∏–Ω –Ω–∞ –≤–∞—à–∏ —Å–æ–±—Å—Ç–≤–µ–Ω–Ω—ã–µ, –µ—Å–ª–∏ –≤—ã –ø–æ–ª—å–∑—É–µ—Ç–µ—Å—å –æ–±—â–µ–π –≤–Ω—É—Ç—Ä–µ–Ω–Ω–µ–π —Å–µ—Ç—å—é (–Ω–∞–ø—Ä–∏–º–µ—Ä –≤ —è–Ω–¥–µ–∫—Å –æ–±–ª–∞–∫–µ)
–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π `db_master_internal_host` –≤–Ω—É—Ç—Ä–µ–Ω–Ω–∏–π –∞–¥—Ä–µ—Å, –≤ –ø—Ä–æ—Ç–∏–≤–Ω–æ–º —Å–ª—É—á–∞–µ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –≤–Ω–µ—à–Ω–∏–π, —Ç–∞–∫–æ–π –∂–µ –∫–∞–∫ –≤ –ø–µ—Ä–µ–º–µ–Ω–Ω–æ–π `db_master`

### 5. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–µ—Ä–≤–µ—Ä–æ–≤ —á–µ—Ä–µ–∑ Ansible
```bash

cd ansible/
ansible-playbook -i inventory.yml playbook.yml

üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
‚îú‚îÄ‚îÄ ansible
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ ansible.cfg
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ example_inventory.ini // –ø—Ä–∏–º–µ—Ä —Ñ–∞–π–ª–∞ inventory
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ group_vars
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ ... // –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –¥–ª—è —Ä–æ–ª–µ–π
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ inventory.ini // –æ—Ç—Å—É—Ç—Å—Ç–≤—É–µ—Ç –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏, –≤–æ—Å–ø–æ–ª—å–∑—É–π—Ç–µ—Å—å –ø—Ä–∏–º–µ—Ä–æ–º
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ playbook.yml
‚îÇ¬†¬† ‚îú‚îÄ‚îÄ roles
‚îÇ¬†¬† ‚îÇ¬†¬† ‚îî‚îÄ‚îÄ ... // –†–æ–ª–∏ –ø–æ —à–∞–≥–∞–º
‚îú‚îÄ‚îÄ backend
‚îÇ¬†¬† ‚îî‚îÄ‚îÄ ... // –†–µ–∞–ª–∏–∑–∞—Ü–∏—è backend
‚îú‚îÄ‚îÄ infra
‚îÇ¬†¬† ‚îî‚îÄ‚îÄ ... // –†–µ–∞–ª–∏–∑–∞—Ü–∏—è –∏–Ω—Ñ—Ä–∞—Å—Ç—Ä—É–∫—Ç—É—Ä—ã –Ω–∞ terraform
‚îú‚îÄ‚îÄ LICENSE
‚îî‚îÄ‚îÄ README.md

```

üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å
- –í—Å–µ sensitive-–¥–∞–Ω–Ω—ã–µ (—Ç–æ–∫–µ–Ω—ã, –ø–∞—Ä–æ–ª–∏) –∏—Å–∫–ª—é—á–µ–Ω—ã –∏–∑ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è —á–µ—Ä–µ–∑ .gitignore
- –î–ª—è –¥–æ—Å—Ç—É–ø–∞ –∫ –í–ú –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è —Ç–æ–ª—å–∫–æ SSH-–∫–ª—é—á–∏

üìù –õ–∏—Ü–µ–Ω–∑–∏—è
MIT License. –ü–æ–¥—Ä–æ–±–Ω–µ–µ –≤ —Ñ–∞–π–ª–µ LICENSE.

> **Note**
> 
> –ü—Ä–æ–µ–∫—Ç —Ä–∞–∑—Ä–∞–±–æ—Ç–∞–Ω –≤ —Ä–∞–º–∫–∞—Ö —É—á–µ–±–Ω–æ–≥–æ –∫—É—Ä—Å–∞ "–†–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω—ã–µ —Å–∏—Å—Ç–µ–º—ã" –≤ –£–Ω–∏–≤–µ—Ä—Å–∏—Ç–µ—Ç–µ –ò–¢–ú–û –ø—Ä–∏ –ø–æ–¥–¥–µ—Ä–∂–∫–µ –Ø–Ω–¥–µ–∫—Å.–ü—Ä–∞–∫—Ç–∏–∫—É–º–∞.